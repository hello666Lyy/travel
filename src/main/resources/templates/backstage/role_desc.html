<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>角色详情</title>
    <th:block th:replace="/backstage/common_resources::common_css"></th:block>
    <th:block th:replace="/backstage/common_resources::common_js"></th:block>
</head>
<body class="hold-transition skin-purple sidebar-mini">
<header th:replace="~{/backstage/common_header::header}"></header>
<aside th:replace="~{/backstage/common_aside::aside}"></aside>
<div class="wrapper">
    <div class="content-wrapper">
        <!-- 内容头部 -->
        <section class="content-header">
            <h1>
                角色管理
                <small>角色详情</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="@{/backstage/index}"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li><a href="@{/backstage/role/all}"> 角色管理</a></li>
                <li class="active">角色详情</li>
            </ol>
        </section>
        <!-- 内容头部 /-->


        <!-- 正文区域 -->
        <section class="content">
            <table id="collapse-table" class="table table-bordered table-hover dataTable">
                <thead>
                <tr>
                    <th>名称</th>
                    <th>详情</th>
                </tr>
                </thead>
                <tbody>
                <!-- 用户信息行（保持你的原有逻辑，补全列） -->
                <tr>
                    <td th:text="${role.roleName}"></td>
                    <td></td>
                </tr>

                <!-- 角色与权限的树结构核心（用th:block循环，避免tr嵌套） -->
                <th:block th:each="permission, status : ${role.permissions}">
                    <!-- 角色行（父节点） -->
                    <tr th:attr="data-tt-id=${status.index}">
                        <td th:text="${permission.permissionName}"></td>
                        <td th:text="${permission.permissionDesc}"></td>
                    </tr>

<!--                    &lt;!&ndash; 权限行（子节点，嵌套在角色循环内） &ndash;&gt;-->
<!--                    <tr th:each="permission, permStatus : ${role.permissions}"-->
<!--                        th:attr="data-tt-parent-id=${status.index},-->
<!--                         data-tt-id=${status.index + '-' + permStatus.index}">-->
<!--                        <td th:text="${permission.permissionName}"></td>-->
<!--                        <td th:text="${permission.permissionDesc}"></td>-->
<!--                    </tr>-->
                </th:block>
                </tbody>
            </table>
        </section>
        <!-- 正文区域 /-->


    </div>
</div>
<footer th:replace="~{/backstage/common_footer::footer}"></footer>
<script>
    // $(document).ready(function() {
    //     /*table tree*/
    //     $("#collapse-table").treetable({
    //         expandable: true
    //     });
    //
    //
    // });

    window.onload = function() {
        $("#collapse-table").treetable({ expandable: true });
    };
</script>
</body>
</html>
